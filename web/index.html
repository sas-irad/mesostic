<!doctype html
<html lang="eng">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>Mesostic Poem Generator</title>
        <meta name="description" content="">
        <!--<meta name="viewport" content="width=device-width, initial-scale=1">-->

        <link rel="apple-touch-icon" href="apple-touch-icon.png">
        <!-- Place favicon.ico in the root directory -->

        <link rel="stylesheet" href="css/main.css">
    </head>
    <body>
        <h1 class="titlefont"><img class="image-header" src="images/john_cage.jpg" alt=""/></h1>

<div class="body-contents">
    <div class="generatebuttonholder">
        <button class="generatebutton" onclick="doParse();">Generate</button>
        <button class="clearbutton" onclick="document.getElementById('mesostic_content').innerHTML = '';">Clear</button>
    </div>        

    <pre id="mesostic_content">
    </pre>


    <form id="mesosticForm">
    <table border="0" cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td><div align="right"><span class="textfont">spine word(s)?</span></div></td>
              <td>&nbsp;</td>
              <td><span class="textfont">
                <input name="spineword" type="text" id="spineword" value="John Cage">
              </span></td>
            </tr>
            <tr>
              <td>&nbsp;</td>
              <td>&nbsp;</td>
              <td>&nbsp;</td>
            </tr>
            <tr>
              <td><div align="right"><span class="textfont">source text?</span></div></td>
              <td>&nbsp;</td>
              <td><span class="textfont">
                <textarea name="sourcetext" id="sourcetext">
Like acrostics, mesotics are written in the conventional way horizontally, but at the same time they follow a vertical rule, down the middle not down the edge as in an acrostic, a string spells a word or name, not necessarily connected with what is being written, though it may be. This vertical rule is lettristic and in my practice the letters are capitalized. Between two capitals in a perfect or 100% mesostic neither letter may appear in lower case. .... In the writing of the wing words, the horizontal text, the letters of the vertical string help me out of sentimentality. I have something to do, a puzzle to solve. This way of responding makes me feel in this respect one with the Japanese people, who formerly, I once learned, turned their letter writing into the writing of poems. In taking the next step in my work, the exploration of nonintention, I don't solve the puzzle that the mesostic string presents. Instead I write or find a source text which is then used as an oracle. I ask it what word shall I use for this letter and what one for the next, etc. This frees me from memory, taste, likes, and dislikes, By means of Mesolist, a program by Jim Rosenberg, all words that satisfy the mesostic rule are listed. IC [a program that generates the I Ching numbers, available for downloading on the Net] then chooses which words in the lists are to be used and gives me all the central words, the position of each in the source material identified by page, line, and column. I then add all the wing words from the source text following of course the rule Mesolist does within the limit of forty-five characters to the right and the same to the left. Then I take out the words I don't want. With respect to the source material, I am in a global situation. Words come first from here and then from there. The situation is not linear. It is as though I am in a forest hunting for ideas." --John Cage
                </textarea>
              </span></td>
            </tr>
            <tr>
              <td>&nbsp;</td>
              <td>&nbsp;</td>
              <td>&nbsp;</td>
            </tr>
            <tr>
              <td><div align="right"><span class="textfont">number of mesostics?</span></div></td>
              <td>&nbsp;</td>
              <td><input name="number_mesostics" type="text" id="number_mesostics" value="1" size="4" maxlength="2"></td>
            </tr>
            <tr>
              <td class="textfont">&nbsp;</td>
              <td>&nbsp;</td>
              <td>&nbsp;</td>
            </tr>
            <tr>
              <td valign="top" class="textfont"><div align="right">where do stanzas break?</div></td>
              <td>&nbsp;</td>
              <td><table width="100%" border="0" cellspacing="0" cellpadding="0">
                <tbody>
                    <tr>
                      <td width="175"><input name="stanzas_break" type="radio" id="radio8" value="random" checked>
                        <span class="textfont">randomly</span></td>
                      <td>&nbsp;</td>
                      <td>&nbsp;</td>
                    </tr>
                    <tr>
                      <td width="175"><input type="radio" name="stanzas_break" id="radio9" value="spineWord">
                        <span class="textfont">after every spine word</span></td>
                      <td>&nbsp;</td>
                      <td>&nbsp;</td>
                    </tr>
                  </tbody>
                </table></td>
            </tr>
            <tr>
              <td>&nbsp;</td>
              <td>&nbsp;</td>
              <td>&nbsp;</td>
            </tr>
            <tr>
              <td><div align="right"><span class="textfont">strip punctuation?</span></div></td>
              <td>&nbsp;</td>
              <td><table width="100%" border="0" cellspacing="0" cellpadding="0">
                <tbody>
                  <tr>
                    <td width="50"><input name="strip_punctuation" type="radio" id="radio" value="1" checked>
                    <span class="textfont">yes</span></td>
                    <td width="10">&nbsp;</td>
                    <td width="50"><input type="radio" name="strip_punctuation" id="radio2" value="0">
                    <label for="strip_punctuation" class="textfont">no</label></td>
                    <td width="75">&nbsp;</td>
                    <td><span class="description-text">Strip everything but [a-z][A-Z][0-9]['].</span></td>
                  </tr>
                </tbody>
              </table></td>
            </tr>
            <tr>
              <td class="textfont">&nbsp;</td>
              <td>&nbsp;</td>
              <td>&nbsp;</td>
            </tr>
            <tr>
              <td valign="top" class="textfont"><div align="right">how sparse is the wing text?</div></td>
              <td>&nbsp;</td>
              <td><table width="100%" border="0" cellspacing="0" cellpadding="0">
                <tbody>
                    <tr>
                      <td width="120"><input name="sparse_wing_text" type="radio" id="radio5" value="normal" checked>
                      <span class="textfont">normal</span></td>
                      <td width="10">&nbsp;</td>
                      <td><span class="description-text">Note: The more sparse the wing text, the less likely additional words will be included.</span></td>
                    </tr>
                    <tr>
                      <td width="120"><input type="radio" name="sparse_wing_text" id="radio6" value="sparse">
                      <span class="textfont">sparse</span></td>
                      <td width="10">&nbsp;</td>
                      <td>&nbsp;</td>
                    </tr>
                    <tr>
                      <td width="120"><input type="radio" name="sparse_wing_text" id="radio7" value="very sparse">
                      <span class="textfont">very sparse</span></td>
                      <td width="10">&nbsp;</td>
                      <td>&nbsp;</td>
                    </tr>
                    <tr>
                      <td width="175"><input name="sparse_wing_text" type="radio" id="radio8" value="none" >
                      <span class="textfont">all eligible words included</span></td>
                    </tr>
                </tbody>
              </table></td>
            </tr>
            <tr>
              <td valign="top">&nbsp;</td>
              <td>&nbsp;</td>
              <td>&nbsp;</td>
            </tr>
            <tr>
              <td valign="top"><div align="right"><span class="textfont">which mesostic rule?</span></div></td>
              <td>&nbsp;</td>
              <td><table width="100%" border="0" cellspacing="0" cellpadding="0">
                <tbody>
                    <tr>
                      <td width="120"><input name="mesostic_rule" type="radio" id="radio3" value="basic" checked>
                      <label for="mesostic_rule1" class="textfont">basic</label></td>
                      <td width="10">&nbsp;</td>
                      <td>&nbsp;</td>
                    </tr>
                    <tr>
                      <td width="120"><input name="mesostic_rule" type="radio" id="radio3" value="50" checked>
                      <label for="mesostic_rule3" class="textfont">50% rule</label></td>
                      <td width="10">&nbsp;</td>
		      <td><span class="description-text">The 50% rule does not permit the second spine letter to appear between spine letters.</span></td>
                      <td>&nbsp;</td>
                    </tr>
                    <tr>
                      <td width="175"><input type="radio" name="mesostic_rule" id="radio4" value="100">
                      <label for="mesostic_rule2" class="textfont">100% rule</label></td>
                      <td width="10">&nbsp;</td>
                      <td><span class="description-text">The 100% rule does not permit either spine letter to appear between spine letters.</span></td>
                    </tr>
                  </tbody>
              </table></td>
            </tr>
            <tr>
              <td valign="top">&nbsp;</td>
              <td>&nbsp;</td>
              <td>&nbsp;</td>
            </tr>
            <tr>
              <td><div align="right"><span class="textfont">use syllable rule?</span></div></td>
              <td>&nbsp;</td>
              <td><table width="100%" border="0" cellspacing="0" cellpadding="0">
                <tbody>
                  <tr>
                    <td width="50"><input name="no_repeat_syllables" id="no_repeat_syllables1" type="radio"  value="0" checked>
                    <label for="no_repeat_syllables1"  class="textfont">no</label></td>
                    <td width="10">&nbsp;</td>
                    <td width="50"><input type="radio" id="no_repeat_syllables2" name="no_repeat_syllables" value="1">
                    <label for="strip_punctuation" class="textfont">yes</label></td>
                    <td width="75">&nbsp;</td>
                    <td><span class="description-text">If a syllable in the text has been matched don't match it again.</span></td>
                  </tr>
                </tbody>
              </table></td>
            </tr>
            <tr>
              <td><div align="right"><span class="textfont">syllable parsing language</span></div></td>
              <td>&nbsp;</td>
              <td>
                  <select id="syllableLanguage" onchange="syllableSplitter.setLanguage(getSelectVal('syllableLanguage'))">
                      <option value="hy">Armenian</option>
                      <option value="be">Belarusian</option>
                      <option value="bn">Bengali</option>
                      <option value="ca">Catalan</option>
                      <option value="cs">Czech</option>
                      <option value="da">Danish</option>
                      <option value="nl">Dutch</option>
                      <option value="en-gb">English (United Kingdom)</option>
                      <option value="en-us" selected=true`>English (United States)</option>
                      <option value="eo">Esperanto</option>
                      <option value="et">Estonian</option>
                      <option value="fi">Finnish</option>
                      <option value="fr">French</option>
                      <option value="de">German</option>
                      <option value="el-monoton">Greek (Modern Monotonic)</option>
                      <option value="el-polyton">Greek (Modern Polytonic)</option>
                      <option value="grc">Greek (Ancient)</option>
                      <option value="gu">Gujarati</option>
                      <option value="hi">Hindi</option>
                      <option value="hu">Hungarian</option>
                      <option value="it">Italian</option>
                      <option value="kn">Kannada</option>
                      <option value="la">Latin</option>
                      <option value="lt">Lithuanian</option>
                      <option value="lv">Latvian</option>
                      <option value="ml">Malayalam</option>
                      <option value="nb-no">Norwegian</option>
                      <option value="or">Oriya</option>
                      <option value="pl">Polish</option>
                      <option value="pt">Portuguese</option>
                      <option value="pa">Punjabi</option>
                      <option value="ro">Romanian</option>
                      <option value="ru">Russian</option>
                      <option value="sr-cyrl">Serbian (Cyrillic)</option>
                      <option value="sr-latn">Serbian (Latin)</option>
                      <option value="sk">Slovak</option>
                      <option value="sl">Slovene</option>
                      <option value="es">Spanish</option>
                      <option value="sv">Swedish</option>
                      <option value="ta">Tamil</option>
                      <option value="te">Telugu</option>
                      <option value="tr">Turkish</option>
                      <option value="uk">Ukrainian</option>
                  </select>
                  <div style="display: none" class="hyphenate" lang="en-us">Please hyphenate me</div>
              </td>
            </tr>
          </tbody>
    </table>
    </form>
    </div>

    <div class="generatebuttonholder">
        <button class="generatebutton" onclick="doParse();">Generate</button>
        <button class="clearbutton" onclick="document.getElementById('mesostic_content').innerHTML = '';">Clear</button>
    </div> 
    
    
    <p class="textfont right-align"><a href="about.html">about the project</a><br></p>

    <script src="js/vendor/Hyphenator/Hyphenator.js" ></script>
    <!--script src="js/vendor/Hyphenator/patterns/en-us.js"></scripti-->
    <script src="js/syllableSplitter.js"></script>
    <script src="js/mesostic.js"></script>
    <script src="js/vendor/pad.js"></script>
    <script type="text/javascript">
        getRadioVal = function (name) {
            var val;
            // get list of radio buttons with specified name
            var radios = document.getElementById('mesosticForm').elements[name];
            
            // loop through list of radio buttons
            for (var i=0, len=radios.length; i<len; i++) {
                if ( radios[i].checked ) { // radio checked?
                    val = radios[i].value; // if so, hold its value in val
                    break; // and break out of for loop
                }
            }
            return val; // return value of checked radio or undefined if none checked
        };
        getSelectVal = function(name) {
            var e = document.getElementById(name);
            return e.options[e.selectedIndex].value;
        }
        function doParse() {
            syllableSplitter.setLanguage(getSelectVal('syllableLanguage'));
            var spineWords = document.getElementById('spineword').value;
            var sourceText = document.getElementById('sourcetext').value;
            var options = {
                rule: getRadioVal('mesostic_rule'),
                spineLoops: document.getElementById('number_mesostics').value,
                stripPunctuation: getRadioVal('strip_punctuation') === "1",
                stanzaBreaks: getRadioVal('stanzas_break'),
                wingTextSparsity: getRadioVal('sparse_wing_text'),
                noRepeatSyllables: getRadioVal('no_repeat_syllables') === "1",
                syllableFinder: syllableSplitter.findSyllableAtPosition
            };
            var result = mesostic.parse(spineWords, sourceText, options);
            var text = mesostic.formatText(result, spineWords, options);
            if(result.parsed) {
                document.getElementById('mesostic_content').innerHTML = text;
            }
            else {
                document.getElementById('mesostic_content').innerHTML = '<span class="warning">Unable to find match for complete spine word(s) in source text with the current settings</span> <br>' + text;
            }

            return result;
        }
    </script>
    
    </body>
</html>
